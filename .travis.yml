language: python
python:
- '3.6'
install:
- pip install ansible==2.8.6 molecule[gce] apache-libcloud
script:
- molecule test --scenario-name gce
after_script:
- molecule destroy --scenario-name gce
env:
  matrix:
  - GCE_CREDENTIALS_FILE="$(pwd)/credentials.json"
  global:
  - secure: OiSLhYuU7d9DQlXNDSAU7Emw1/RD95IZ5Ztw+EDVBwgZeF+ZMCTVePMMtaQHqiraC4J7bztXziA1MOEiIoyUhq1yZqqQWDr6/VVSkQJs1aE8RqSExPc71p0TY0u/mXHiZERiYWemBvD1msZ8mqi7DOthXsaH2K27IqN3RHSI6A2lgxVYkL6VfvBirTebjEFV3qOZolOZHTdBBdN0kzC40vS8dxQUwxg29J6JiUfPA0yjZuD0gqPQq+S0RJNaVTkWI7TlTcMjevSB0KyW4x3NahA1sqHYzTmFA17a0jqM2Jek5vt0aA8dXCuKarXZCnJX1mNTLf1N0ab+tphtbAEJmfEXfojfgdFI7geNvZbVwGbeOKqLBssUUy0QrWVbic69Eu90Kh0bOERVPnGuGlNuqhFjjfb83jPj49LoKZYYCzKQapTpprvRpYZ+ebpilkhVsn4SDfa+lLlwKriWq0+7XJgOXPwkD3yBZvKRvEBBptGTKcGnZxX6MO+SMuQsL/NzFe7AK5fhwc5kj5K/97ysEx6iLwRrvnhm9GbRpI7dBaN034SK7VCY0YU0ZkbxKzw/ff3ekUNS8VCzIgtB4x+kqGEIMLMotG9fSB+gRsHG5imp4bsIOysV28ABmyLlZM9iPAvKEIuwQ7Sz6RzmYg8EJ4Oum+CkghP/UQSWfx+P/GM=
  - secure: 2t3x6AvHuESWvrrBmpvlWN+Bh21q/vagYTFkMclUpsbrOJXRGE501O9Av5NE/avJnP5pSt0QqqndB6/AhjfkZP8gchv8Wj4h9jKQeJkEGxXI+4v8LogsmBpnrji3ufpV5faSESBz+49115LaLd3HRT+ctzWdINEx3YfK65tBUDe0NQHEzCWSo6xXF+s1/wlflXFZFTfeELUUQoSwHEwhGsCurGWimwfSEmHOcmZ4EcThgceDL3Qw5wFnlziutd46F0k5oHy1C+ZBMO1oUCaGFzztO9/wcEmUGJv7j3LgDz6HBzWX2ypBSj37MaKlkYHzG9iuDsHMvxkB4S26THQH3jYaRSCwcykKcbmJf6uKXAgZT6Ei6msFa9/4dGApZm0uZm+gqcmnYC4HmNDvJAcpPx6z9Ca8EYC3FplVqHI4EDDYjz5d9wnIbPFbExzN3p7yOaTqRL4pMcp4cpp3bLffO3pJYloPuhFDDJvsDSeHCWCwbmzEaML0FYSVMB1XiX6yz6dBsiGJ0kZgj6BFG9zJUPZn3QJEZrHo5zmmcirvtSNCEgR/HR8RN82stBtsvpvXehwoQIlueRATdEvS3vd0OVY99YujPsRMZsBGwi1wOXY2nd5Q0tAIUHQxAByG2eoeMn2+IXJ7uR8UW5NroDVAEiUgARSlrAVzNa9ByK3vyRM=
  - secure: 3qCCcUsSu7mySPg1jgE7CuXaUic9cXL6sEgFqmTZui9qjYmzdKj6eVJCCX5dQNV4xDnFMJYXEHg7uaYyPzuFSVg6pEEcE8aOIUIrHxawMq/lZM0AYoudqV2uAIrTDNQ29Xag5SHpx4okkQaCp3kXAFZGhQZkSwBbA61dyUzCdpaCaxTVgpnBZGUGjn+BvB4UcAnyObbch59Y1hM6IvUCHtWIsmzwjSEEkW5E4EkZGW9YVBoXQVCrN8Ya29Ja/l6eImh7f40NZG+pQQW879I4ukomED7mCkZCvWo0pr6OGJNR2hPj5vFpQd+dQHFJESpgpBUE5nd2/2QCAvl222Pd+jtPQAMKlX2GL9M3SrdVS74saARvQcIoI9X9eJzEb+4SQ8z7ciX3H9SnmUKgqpaJ9ksaKHsSGWjY7wFj6zjFMYwUBZPrWrAgmWyCAJeieoVIFaSd2crVcn3stvG7NII0RbA4LeoB8NAwKR8VNoLC6NPrd441e3dTUB5wHYggOaGVMgGe9LhBzQpdn+pUF78hzoB26gDDfAlUNCc0ZEmNxK0r9+w2BKICtKykuYQkDt6GnqATUk+ZUnJU4fEiJwV0bmr4yt8PGMv9DP1pjS+/rwlur/EAoTDqqYgpx5RYmMMu7sCcMrfpj8uiSsDGTjYLc4QtSvZx+p3RMi3t00VwDz4=
before_install:
- openssl aes-256-cbc -K $encrypted_b1f6b1eff77e_key -iv $encrypted_b1f6b1eff77e_iv
  -in secrets.tar.enc -out secrets.tar -d
- tar xvf secrets.tar
- mv google_compute_engine /home/travis/.ssh/
- chmod 0600 /home/travis/.ssh/google_compute_engine
notifications:
  slack:
    rooms:
      secure: EiQF4H7hVLUHsxIPha42v90J9pRiWsARPJes0Dj+Dtan9r9VOcksRvWervchZPG4zr/qjgmzf17+Tw8TwnilCqJU+I61g3OtGZWV3PouyRMrbnG2XpHGG3oW8I5HBU2G/n9ZAg9laprRP6nyWbIB48Kssu68JxRuaaJnhaIboxnbZ8VmgBO7LsBp6hlfI+19h/ak76ql4EM9PV2GE1s8gcW01hIq+RG5qk8HuRSUkzRUpbN7waUT3xo3cbDnW0BgPfQtjn+VIAKnKEgD302lpfeG7o0m5/mAHCpq88M8NonrYV91IA3NxDVRAO8EPQUyvlVJu0z7bSlv+94hDEwmpQbbdvHVgqtpGhxgG41jadG5IFhHuuqSqiq3QamY3pLqmGGAMdCXP6lHk8QfMYIk8FqsPw0ydc1+mgyg7q1TcgrzRLxiHQSahU3S316ZBFsDDHvUKKQlvHVwGbSJNPIQzT1izD6PdUO307RvpSLH0yT7H+f4YoFAGtkMIj580TYX9DthAIAUv4RluptMjhzNBbVC0RBRRDoEjj2fqbwpHqJtDWzCgDpMYT/a0XrxDZNQcfE95uT1bS4Z1topzZgla9O8dC+K2zdS94nXWAepTB64gDbDXiRkPpBNwZJlbQoP28gdoMMxiXe480bPTqyMezZhEJggM/pQwx7npnjbMYE=
